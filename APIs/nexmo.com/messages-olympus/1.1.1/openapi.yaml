basePath: /v1/messages
definitions:
  Audio:
    allOf:
      - $ref: '#/definitions/baseMessageType'
      - properties:
          audio:
            properties:
              url:
                example: 'https://example.com/audio.mp3'
                format: url
                type: string
            required:
              - url
            type: object
          message_type:
            description: >-
              The type of message to send. You must provide `audio` in this
              field
            enum:
              - audio
            example: audio
            type: string
        required:
          - audio
        title: Audio
        type: object
        x-tab-id: Audio
  Context:
    properties:
      message_from:
        description: >-
          The phone number of the **original sender** of the message being
          replied to in the [E.164](https://en.wikipedia.org/wiki/E.164) format.
        example: '447700900000'
        type: string
      message_uuid:
        description: The UUID of the message being replied to
        example: aaaaaaaa-bbbb-cccc-dddd-0123456789ab
        type: string
    required:
      - message_uuid
      - message_from
    type: object
  Custom:
    allOf:
      - $ref: '#/definitions/baseMessageType'
      - properties:
          custom:
            additionalProperties: true
            description: >-
              A custom payload, which is passed directly to WhatsApp for certain
              features such as templates and interactive messages. The schema of
              a custom object can vary widely. [Read more about Custom
              Objects](https://developer.vonage.com/messages/concepts/custom-objects).
            type: object
          message_type:
            description: >-
              The type of message to send. You must provide `custom` in this
              field
            enum:
              - custom
            example: custom
            type: string
        title: Custom
        type: object
        x-tab-id: Custom
  ErrorChannel:
    description: Unsupported channel
    properties:
      detail:
        description: Additional information about the error
        example: The specified channel is not supported.
        type: string
      instance:
        description: Internal Trace ID
        example: bf0ca0bf927b3b52e3cb03217e1a1ddf
        type: string
      title:
        description: Generic error message
        example: Unsupported channel
        type: string
      type:
        description: Link to error / remediation options
        example: 'https://developer.nexmo.com/api-errors/messages-olympus#1100'
        type: string
    required:
      - type
      - title
      - detail
      - instance
    type: object
  ErrorChannelParams:
    description: Invalid channel parameters
    properties:
      detail:
        description: Additional information about the error
        example: The value of one or more parameters is invalid.
        type: string
      instance:
        description: Internal Trace ID
        example: bf0ca0bf927b3b52e3cb03217e1a1ddf
        type: string
      invalid_parameters:
        items:
          properties:
            name:
              description: Name of invalid parameter
              example: messenger.category
              type: string
            reason:
              description: Reason of failure
              example: 'Must be one of `response`, `update` or `message_tag`.'
              type: string
          type: object
        type: array
      title:
        description: Generic error message
        example: Invalid channel parameters
        type: string
      type:
        description: Link to error / remediation options
        example: 'https://developer.nexmo.com/api-errors/messages-olympus#1110'
        type: string
    required:
      - type
      - title
      - detail
      - instance
    type: object
  ErrorClientReference:
    description: Invalid client reference
    properties:
      detail:
        description: Additional information about the error
        example: The client reference can be a string of up to 40 characters.
        type: string
      instance:
        description: Internal Trace ID
        example: bf0ca0bf927b3b52e3cb03217e1a1ddf
        type: string
      title:
        description: Generic error message
        example: Invalid client reference
        type: string
      type:
        description: Link to error / remediation options
        example: 'https://developer.nexmo.com/api-errors/messages-olympus#1060'
        type: string
    required:
      - type
      - title
      - detail
      - instance
    type: object
  ErrorInternal:
    properties:
      detail:
        description: Additional information about the error
        example: There was an error processing your request in the Platform.
        type: string
      instance:
        description: Internal Trace ID
        example: bf0ca0bf927b3b52e3cb03217e1a1ddf
        type: string
      title:
        description: Generic error message
        example: Internal error
        type: string
      type:
        description: Link to error / remediation options
        example: 'https://developer.nexmo.com/api-errors/messages-olympus#1000'
        type: string
    required:
      - type
      - title
      - detail
      - instance
    type: object
  ErrorInvalidJson:
    description: Invalid JSON
    properties:
      detail:
        description: Additional information about the error
        example: >-
          Unexpected character ('"' (code 34)): was expecting comma to separate
          Object entries
        type: string
      instance:
        description: Internal Trace ID
        example: bf0ca0bf927b3b52e3cb03217e1a1ddf
        type: string
      title:
        description: Generic error message
        example: The request body did not contain valid JSON
        type: string
      type:
        description: Link to error / remediation options
        example: 'https://developer.nexmo.com/api-errors#invalid-json'
        type: string
    required:
      - type
      - title
      - detail
      - instance
    type: object
  ErrorMessageParams:
    description: Invalid message parameters
    properties:
      detail:
        description: Additional information about the error
        example: The value of one or more parameters is invalid.
        type: string
      instance:
        description: Internal Trace ID
        example: bf0ca0bf927b3b52e3cb03217e1a1ddf
        type: string
      invalid_parameters:
        items:
          properties:
            name:
              description: Name of invalid parameter
              example: image.url
              type: string
            reason:
              description: Reason of failure
              example: is required.
              type: string
          type: object
        type: array
      title:
        description: Generic error message
        example: Invalid params
        type: string
      type:
        description: Link to error / remediation options
        example: 'https://developer.nexmo.com/api-errors/messages-olympus#1150'
        type: string
    required:
      - type
      - title
      - detail
      - instance
    type: object
  ErrorMessageType:
    description: Invalid message type
    properties:
      detail:
        description: Additional information about the error
        example: The `to` parameter is invalid for the given channel.
        type: string
      instance:
        description: Internal Trace ID
        example: bf0ca0bf927b3b52e3cb03217e1a1ddf
        type: string
      title:
        description: Generic error message
        example: Invalid message type
        type: string
      type:
        description: Link to error / remediation options
        example: 'https://developer.nexmo.com/api-errors/messages-olympus#1140'
        type: string
    required:
      - type
      - title
      - detail
      - instance
    type: object
  ErrorPaymentRequired:
    properties:
      detail:
        description: Additional information about the error
        example: >-
          This request could not be performed due to your account balance being
          low.
        type: string
      instance:
        description: Internal Trace ID
        example: bf0ca0bf927b3b52e3cb03217e1a1ddf
        type: string
      title:
        description: Generic error message
        example: Low balance
        type: string
      type:
        description: Link to error / remediation options
        example: 'https://developer.nexmo.com/api-errors/#low-balance'
        type: string
    required:
      - type
      - title
      - detail
      - instance
    type: object
  ErrorRecipient:
    description: Invalid recipient
    properties:
      detail:
        description: Additional information about the error
        example: The `to` parameter is invalid for the given channel.
        type: string
      instance:
        description: Internal Trace ID
        example: bf0ca0bf927b3b52e3cb03217e1a1ddf
        type: string
      title:
        description: Generic error message
        example: Invalid recipient
        type: string
      type:
        description: Link to error / remediation options
        example: 'https://developer.nexmo.com/api-errors/messages-olympus#110'
        type: string
    required:
      - type
      - title
      - detail
      - instance
    type: object
  ErrorSender:
    description: Invalid sender
    properties:
      detail:
        description: Additional information about the error
        example: The `from` parameter is invalid for the given channel.
        type: string
      instance:
        description: Internal Trace ID
        example: bf0ca0bf927b3b52e3cb03217e1a1ddf
        type: string
      title:
        description: Generic error message
        example: Invalid sender
        type: string
      type:
        description: Link to error / remediation options
        example: 'https://developer.nexmo.com/api-errors/messages-olympus#1120'
        type: string
    required:
      - type
      - title
      - detail
      - instance
    type: object
  ErrorThrottled:
    properties:
      detail:
        description: Additional information about the error
        example: 'Please wait, then retry your request'
        type: string
      instance:
        description: Internal Trace ID
        example: bf0ca0bf927b3b52e3cb03217e1a1ddf
        type: string
      title:
        description: Generic error message
        example: Rate Limit Hit
        type: string
      type:
        description: Link to error / remediation options
        example: 'https://developer.nexmo.com/api-errors/messages-olympus#1010'
        type: string
    required:
      - type
      - title
      - detail
      - instance
    type: object
  ErrorUnauthorizedInvalidApplication:
    description: Invalid Application Type
    properties:
      detail:
        description: Additional information about the error
        example: Check your API key is correct and has been whitelisted
        type: string
      instance:
        description: Internal Trace ID
        example: bf0ca0bf927b3b52e3cb03217e1a1ddf
        type: string
      title:
        description: Generic error message
        example: The crendentials provided do not have access to the requested product
        type: string
      type:
        description: Link to error / remediation options
        example: 'https://developer.nexmo.com/api-errors/#unprovisioned'
        type: string
    required:
      - type
      - title
      - details
      - instance
    type: object
  ErrorUnauthorizedMissingCredentials:
    description: Missing or Invalid Credentials
    properties:
      detail:
        description: Additional information about the error
        example: >-
          Check that you're using the correct credentials, and that your account
          has this feature enabled
        type: string
      instance:
        description: Internal Trace ID
        example: bf0ca0bf927b3b52e3cb03217e1a1ddf
        type: string
      title:
        description: Generic error message
        example: You did not provide correct credentials.
        type: string
      type:
        description: Link to error / remediation options
        example: 'https://developer.nexmo.com/api-errors/#unathorized'
        type: string
    required:
      - type
      - title
      - details
      - instance
    type: object
  File:
    allOf:
      - $ref: '#/definitions/baseMessageType'
      - properties:
          file:
            properties:
              url:
                example: 'https://example.com/file.pdf'
                type: string
            required:
              - url
            type: object
          message_type:
            description: The type of message to send. You must provide `file` in this field
            enum:
              - file
            example: file
            type: string
        required:
          - file
        title: File
        type: object
        x-tab-id: File
  FromId:
    description: |
      The ID of the message sender
    example: '9876543210'
    maxLength: 50
    minLength: 1
    type: string
  FromNumber:
    description: >
      The phone number of the message **sender** in the
      [E.164](https://en.wikipedia.org/wiki/E.164) format. Don't use a leading +
      or 00 when entering a phone number, start with the country code, for
      example, 447700900000. For SMS in certain localities alpha-numeric sender
      id's will work as well, see [Global
      Messaging](https://developer.nexmo.com/messaging/sms/guides/country-specific-features#country-specific-features)
      for more details
    example: '447700900001'
    type: string
  Image:
    allOf:
      - $ref: '#/definitions/baseMessageType'
      - properties:
          image:
            properties:
              url:
                description: >-
                  The publicly accessible URL of the image attachment. The image
                  file is available for 48 hours after it is created. Supported
                  types are .jpg, .jpeg, and .png
                example: 'https://example.com/image.jpg'
                format: url
                type: string
            required:
              - url
            type: object
          message_type:
            description: >-
              The type of message to send. You must provide `image` in this
              field
            enum:
              - image
            example: image
            type: string
        required:
          - image
        title: Image
        type: object
        x-tab-id: Image
  InboundMessengerMessageCommon:
    properties:
      channel:
        description: The channel that the message came in on
        enum:
          - messenger
        example: messenger
        type: string
      from:
        $ref: '#/definitions/FromId'
      message_uuid:
        $ref: '#/definitions/MessageUuid'
      timestamp:
        $ref: '#/definitions/Timestamp'
      to:
        $ref: '#/definitions/ToId'
    required:
      - channel
      - message_uuid
      - to
      - from
      - timestamp
    title: Messenger
    x-tab-id: Messenger
  InboundViberMessageCommon:
    properties:
      channel:
        description: The channel that the message came in on
        enum:
          - viber_service
        example: viber_service
        type: string
      from:
        $ref: '#/definitions/FromNumber'
      message_uuid:
        $ref: '#/definitions/MessageUuid'
      timestamp:
        $ref: '#/definitions/Timestamp'
      to:
        $ref: '#/definitions/ToId'
    required:
      - channel
      - message_uuid
      - to
      - from
      - timestamp
    title: Viber
    x-tab-id: Viber
  MessageUuid:
    description: The UUID of the message
    example: aaaaaaaa-bbbb-cccc-dddd-0123456789ab
    type: string
  Profile:
    properties:
      name:
        description: The WhatsApp number's displayed profile name
        example: Jane Smith
        type: string
    required:
      - name
    type: object
  Reply:
    allOf:
      - $ref: '#/definitions/baseMessageType'
      - properties:
          message_type:
            description: >-
              The type of message to send. You must provide `custom` in this
              field.
            enum:
              - reply
            example: reply
            type: string
          reply:
            properties:
              description:
                description: >-
                  A description that may be added to the interactive options
                  presented (available only on interactive lists).
                example: Select 9am appointmaent time
                type: string
              id:
                description: >-
                  An identifier to help identify the exact interactive message
                  response.
                example: row1
                type: string
              title:
                description: The title displayed on the interactive option chosen.
                example: 9am
                type: string
            required:
              - id
              - title
            type: object
        required:
          - reply
        title: Reply
        type: object
        x-tab-id: Reply
  Template:
    allOf:
      - $ref: '#/definitions/baseMessageType'
      - properties:
          message_type:
            description: >-
              The type of message to send. You must provide `template` in this
              field
            enum:
              - template
            example: template
            type: string
          template:
            properties:
              name:
                description: >-
                  The name of the template. For WhatsApp use your WhatsApp
                  namespace (available via Facebook Business Manager), followed
                  by a colon : and the name of the template to use.
                example: verify
                type: string
              parameters:
                description: >-
                  The parameters are an array of objects, with the first object
                  being used for {{1}} in the template, with the second being
                  {{2}} etc.
                items:
                  $ref: '#/definitions/TemplateParameters'
                type: array
            required:
              - name
            type: object
        required:
          - template
        title: Template
        type: object
        x-tab-id: Template
  TemplateParameters:
    description: List of parameters to populate the template
    properties:
      key:
        description: >-
          key/value pair.You can find the full list of supported parameters on
          WhatsApp's [messages parameters documentation]
          (https://developers.facebook.com/docs/whatsapp/on-premises/reference/messages#message-templates).
        example: value
        type: string
    type: object
  Text:
    allOf:
      - $ref: '#/definitions/baseMessageType'
      - description: The text of message to send.
        properties:
          message_type:
            description: The type of message to send. You must provide `text` in this field
            enum:
              - text
            example: text
            type: string
          text:
            example: 'Nexmo Verification code: 12345.<br />Valid for 10 minutes.'
            type: string
        required:
          - text
        title: Text
        x-tab-id: Text
  Timestamp:
    description: 'The datetime of when the event occurred, in `ISO 8601` format.'
    example: '2020-01-01T14:00:00.000Z'
    type: string
  ToId:
    description: |
      The ID of the message recipient
    example: 0123456789
    maxLength: 50
    minLength: 1
    type: string
  ToNumber:
    description: >
      The phone number of the message **recipient** in the
      [E.164](https://en.wikipedia.org/wiki/E.164) format. Don't use a leading +
      or 00 when entering a phone number, start with the country code, for
      example, 447700900000.
    example: '447700900000'
    maxLength: 15
    minLength: 7
    type: string
  Unsupported:
    allOf:
      - $ref: '#/definitions/baseMessageType'
      - properties:
          message_type:
            description: >-
              The type of message to send. Will be `unsupported` if the type of
              message received from user is not supported by the channel.
            enum:
              - unsupported
            example: unsupported
            type: string
        required:
          - message_type
        title: Unsupported
        type: object
        x-tab-id: Unsupported
  Usage:
    properties:
      currency:
        description: The charge currency in ISO 4217 format.
        enum:
          - EUR
        example: EUR
        type: string
      price:
        description: The charge amount as a stringified number.
        example: '0.0333'
        type: string
    type: object
  Video:
    allOf:
      - $ref: '#/definitions/baseMessageType'
      - properties:
          message_type:
            description: >-
              The type of message to send. You must provide `video` in this
              field
            enum:
              - video
            example: video
            type: string
          video:
            properties:
              url:
                description: >
                  Publicly accessible URL of the video attachment. Supports file
                  types .mp4 and .3gpp

                  > Note: Only supports video codec H.264 and audio codec AAC
                example: 'https://example.com/video.mp4'
                format: url
                type: string
            required:
              - url
            type: object
        required:
          - video
        title: Video
        type: object
        x-tab-id: Video
  baseMessageType:
    properties:
      client_ref:
        description: >-
          Client reference of up to 40 characters. The reference will be present
          in every message status.
        type: string
    required:
      - to
      - from
      - message
      - message_type
      - channel
    type: object
  channelOptionsMessenger:
    properties:
      channel:
        description: The channel to send to. You must provide `messenger` in this field
        enum:
          - messenger
        example: messenger
        type: string
      from:
        $ref: '#/definitions/FromId'
      messenger:
        properties:
          category:
            description: >-
              The use of different category tags enables the business to send
              messages for different use cases. For Facebook Messenger they need
              to comply with their [Messaging Types
              policy](https://developers.facebook.com/docs/messenger-platform/send-messages#messaging_types).
              Vonage maps our `category` to their `messaging_type`. If
              `message_tag` is used, then an additional `tag` for that type is
              mandatory. By default Vonage sends the `response` category to
              Facebook Messenger.
            enum:
              - response
              - update
              - message_tag
            example: response
            type: string
          tag:
            description: >-
              A tag describing the type and relevance of the 1:1 communication
              between your app and the end user. A full list of available tags
              is available
              [here](https://developers.facebook.com/docs/messenger-platform/send-messages/message-tags)
            example: CONFIRMED_EVENT_UPDATE
            type: string
        type: object
      to:
        $ref: '#/definitions/ToId'
    type: object
  channelOptionsMms:
    properties:
      channel:
        description: The channel to send to. You must provide `mms` in this field
        enum:
          - mms
        example: mms
        type: string
      from:
        $ref: '#/definitions/FromNumber'
      to:
        $ref: '#/definitions/ToNumber'
    type: object
  channelOptionsSms:
    properties:
      channel:
        description: The channel to send to. You must provide `sms` in this field
        enum:
          - sms
        example: sms
        type: string
      from:
        $ref: '#/definitions/FromNumber'
      to:
        $ref: '#/definitions/ToNumber'
    type: object
  channelOptionsViber:
    properties:
      channel:
        description: The channel to send to. You must provide `viber_service` in this field
        enum:
          - viber_service
        example: viber_service
        type: string
      from:
        $ref: '#/definitions/FromId'
      to:
        $ref: '#/definitions/ToNumber'
      viber_service:
        properties:
          category:
            description: >-
              The use of different category tags enables the business to send
              messages for different use cases. For Viber Service Messages the
              first message sent from a business to a user must be personal,
              informative & a targeted message - not promotional. By default
              Vonage sends the `transaction` category to Viber Service Messages.
            enum:
              - transaction
              - promotion
            type: string
          ttl:
            description: >-
              Set the time-to-live of message to be delivered in seconds. i.e.
              if the message is not delivered in 600 seconds then delete the
              message.
            example: 600
            maximum: 259200
            minimum: 30
            type: integer
          type:
            description: >-
              Viber-specific type definition. To use "template", please contact
              your Vonage Account Manager to setup your templates. To find out
              more please visit the [product
              page](https://www.vonage.com/communications-apis/messages/)
            type: string
        type: object
    type: object
  channelOptionsWhatsapp:
    properties:
      channel:
        description: The channel to send to. You must provide `whatsapp` in this field
        enum:
          - whatsapp
        example: whatsapp
        type: string
      from:
        $ref: '#/definitions/FromNumber'
      to:
        $ref: '#/definitions/ToNumber'
    type: object
  inboundMessageMMS:
    properties:
      channel:
        description: The channel the message came in on
        enum:
          - mms
        example: mms
        type: string
      from:
        $ref: '#/definitions/FromNumber'
      message_uuid:
        $ref: '#/definitions/MessageUuid'
      timestamp:
        $ref: '#/definitions/Timestamp'
      to:
        $ref: '#/definitions/ToNumber'
    required:
      - channel
      - message_uuid
      - to
      - from
      - timestamp
    title: MMS
    type: object
    x-tab-id: MMS
  inboundMessageSMS:
    properties:
      channel:
        description: The channel the message came in on
        enum:
          - sms
        example: sms
        type: string
      from:
        $ref: '#/definitions/FromNumber'
      message_uuid:
        $ref: '#/definitions/MessageUuid'
      sms:
        description: Channel specific metadata for SMS
        properties:
          keyword:
            description: The first word of the message sent to uppercase.
            example: HELLO
            type: string
          num_messages:
            description: >-
              The number of inbound SMS messages concatenated together to
              comprise this message. SMS messages are 160 characters, if an
              inbound message exceeds that size they are concatenated together
              to forma single message. This number indicates how many messages
              formed this webhook.
            example: '2'
            type: string
        type: object
      text:
        description: |
          The UTF-8 encoded text of the inbound message.
        example: Hello From Vonage!
        type: string
      timestamp:
        $ref: '#/definitions/Timestamp'
      to:
        $ref: '#/definitions/ToNumber'
      usage:
        $ref: '#/definitions/Usage'
    required:
      - channel
      - message_uuid
      - to
      - from
      - timestamp
      - text
    title: SMS
    type: object
  inboundWhatsAppMessageCommon:
    properties:
      channel:
        description: The channel that the message came in on
        enum:
          - whatsapp
        example: whatsapp
        type: string
      context:
        $ref: '#/definitions/Context'
      from:
        $ref: '#/definitions/FromNumber'
      message_uuid:
        $ref: '#/definitions/MessageUuid'
      profile:
        $ref: '#/definitions/Profile'
      provider_message:
        description: >-
          A message from the channel provider, which may contain a description,
          error codes or other information
        type: string
      timestamp:
        $ref: '#/definitions/Timestamp'
      to:
        $ref: '#/definitions/ToNumber'
    required:
      - channel
      - message_uuid
      - to
      - from
      - timestamp
    title: WhatsApp
    type: object
    x-tab-id: WhatsApp
  messageStatusBase:
    properties:
      client_ref:
        description: >-
          Client reference of up to 40 characters. The reference will be present
          in every message status.
        type: string
      error:
        description: >-
          If the message encountered a problem a descriptive error will be
          supplied in this object.
        properties:
          detail:
            description: >-
              Text describing the error. See [our errors
              list](https://developer.nexmo.com/api-errors/messages-olympus) for
              a list of possible errors
            example: >-
              Throttled - You have exceeded the submission capacity allowed on
              this account. Please wait and retry
            type: string
          instance:
            description: The record id of this error's occurrence.
            example: bf0ca0bf927b3b52e3cb03217e1a1ddf
            type: string
          title:
            description: >-
              The error code encountered when sending the message. See [our
              errors
              list](https://developer.nexmo.com/api-errors/messages-olympus) for
              a list of possible errors
            example: 1000
            type: string
          type:
            description: 'The type of error encountered, follow URL for more details'
            example: 'https://developer.nexmo.com/api-errors/messages-olympus#1000'
            format: url
            type: string
        type: object
      from:
        $ref: '#/definitions/FromNumber'
      message_uuid:
        $ref: '#/definitions/MessageUuid'
      status:
        description: The status of the message.
        enum:
          - submitted
          - delivered
          - rejected
          - undeliverable
        example: submitted
        type: string
      timestamp:
        description: 'The datetime of when the event occurred, in `ISO 8601` format.'
        example: '2020-01-01T14:00:00.000Z'
        type: string
      to:
        $ref: '#/definitions/ToNumber'
      usage:
        properties:
          currency:
            description: The charge currency in ISO 4217 format.
            enum:
              - EUR
            example: EUR
            type: string
          price:
            description: The charge amount as a stringified number.
            example: '0.0333'
            type: string
        type: object
    required:
      - message_uuid
      - channel
      - to
      - from
      - timestamp
      - status
    type: object
  messageStatusMMS:
    allOf:
      - $ref: '#/definitions/messageStatusBase'
      - description: MMS
        properties:
          channel:
            description: The channel sending to.
            enum:
              - mms
            example: mms
            type: string
        title: MMS
        x-tab-id: MMS
  messageStatusMessenger:
    allOf:
      - $ref: '#/definitions/messageStatusBase'
      - description: Messenger
        properties:
          channel:
            description: The channel sending to.
            enum:
              - messenger
            example: messenger
            type: string
          from:
            $ref: '#/definitions/FromId'
          status:
            enum:
              - submitted
              - delivered
              - rejected
              - undeliverable
              - read
            example: read
          to:
            $ref: '#/definitions/ToId'
        title: Messenger
        x-tab-id: Messenger
  messageStatusSMS:
    allOf:
      - $ref: '#/definitions/messageStatusBase'
      - description: SMS
        properties:
          channel:
            description: The channel sending to.
            enum:
              - sms
            example: sms
            type: string
        title: SMS
        x-tab-id: SMS
  messageStatusViber:
    allOf:
      - $ref: '#/definitions/messageStatusBase'
      - description: Viber
        properties:
          channel:
            description: The channel sending to.
            enum:
              - viber_service
            example: viber_service
            type: string
          status:
            enum:
              - submitted
              - delivered
              - rejected
              - undeliverable
              - read
            example: read
        title: Viber
        x-tab-id: Viber
  messageStatusWhatsApp:
    allOf:
      - $ref: '#/definitions/messageStatusBase'
      - description: WhatsApp
        properties:
          channel:
            description: The channel sending to.
            enum:
              - whatsapp
            example: whatsapp
            type: string
          status:
            enum:
              - submitted
              - delivered
              - rejected
              - undeliverable
              - read
            example: read
        title: WhatsApp
        x-tab-id: WhatsApp
  vCard:
    allOf:
      - $ref: '#/definitions/baseMessageType'
      - properties:
          message_type:
            description: >-
              The type of message to send. You must provide `vcard` in this
              field
            enum:
              - vcard
            example: vcard
            type: string
          vcard:
            properties:
              url:
                description: >-
                  The publicly accessible URL of the vCard attachment. Supported
                  types are .vcf only
                example: 'https://example.com/conatact.vcf'
                format: url
                type: string
            required:
              - url
            type: object
        required:
          - vcard
        title: vCard
        type: object
        x-tab-id: vCard
host: api.nexmo.com
info:
  contact:
    email: devrel@nexmo.com
    name: Nexmo DevRel
    url: 'https://developer.nexmo.com/'
  description: >-
    The Messages API consolidates and normalises exchanges across all messaging
    channels. It allows you to use a single API to interact with our various
    channels such as SMS, MMS, WhatsApp, Viber and Facebook Messenger
  title: Messages API
  version: 1.1.1
  x-origin:
    - format: openapi
      url: >-
        https://raw.githubusercontent.com/nexmo/api-specification/master/definitions/messages-olympus.yml
      version: '3.0'
  x-providerName: nexmo.com
  x-serviceName: messages-olympus
paths:
  /:
    post:
      callbacks:
        message-status:
          '{$request.body#/callback}':
            post:
              description: >-
                Webhooks provide information about events happening to the
                message such as whether it has been sent, delivered or rejected
                by the provider.
              operationId: message-status
              requestBody:
                content:
                  application/json:
                    schema:
                      oneOf:
                        - $ref: '#/definitions/messageStatusSMS'
                        - $ref: '#/definitions/messageStatusMMS'
                        - $ref: '#/definitions/messageStatusWhatsApp'
                        - $ref: '#/definitions/messageStatusMessenger'
                        - $ref: '#/definitions/messageStatusViber'
                required: true
              responses:
                '200':
                  description: Your server returns this code if it accepts the callback.
              summary: Message Status
              x-example-path: /webhooks/message-status
      consumes:
        - application/json
      description: Send a Message
      operationId: SendMessage
      parameters:
        - description: Send a Message.
          in: body
          name: body
          required: true
          schema: {}
          x-show-example-request: true
      produces:
        - application/json
      responses:
        '202':
          description: Accepted.
          schema:
            type: object
        '401':
          description: Authentication failure
          schema: {}
        '402':
          description: Payment Required
          schema:
            $ref: '#/definitions/ErrorPaymentRequired'
        '422':
          description: Unprocessable Entity
          schema: {}
        '429':
          description: Too Many Requests
          schema:
            $ref: '#/definitions/ErrorThrottled'
        '500':
          description: Internal error
          schema:
            $ref: '#/definitions/ErrorInternal'
      security:
        - bearerAuth: []
        - basicAuth: []
      summary: Send a message to the given channel.
schemes:
  - https
securityDefinitions:
  basicAuth:
    type: basic
  bearerAuth:
    in: header
    name: Authorization
    type: apiKey
swagger: '2.0'
x-components: {}
x-errors:
  '1000':
    description: >-
      Throttled - You have exceeded the submission capacity allowed on this
      account. Please wait and retry
  '1010':
    description: >-
      Missing params - Your request is incomplete and missing some mandatory
      parameters.
  '1020':
    description: Invalid params  -  The value of one or more parameters is invalid.
  '1021':
    description: Invalid tag  -  The tag value is invalid.
  '1022':
    description: Invalid template  -  Invalid template or template parameters
  '1030':
    description: >-
      Internal error  -  There was an error processing your request in the
      Platform.
  '1040':
    description: >-
      Invalid message  -  The Platform was unable to process your request. For
      example, due to an unrecognised prefix for the phone number.
  '1050':
    description: >-
      Number barred  -  The number you are trying to submit to is blacklisted
      and may not receive messages.
  '1060':
    description: >-
      Partner account barred  -  The `api_key` you supplied is for an account
      that has been barred from submitting messages.
  '1070':
    description: >-
      Partner quota exceeded  -  Your pre-paid account does not have sufficient
      credit to process this message.
  '1080':
    description: >-
      Account not enabled for REST  -  This account is not provisioned for REST
      submission, you should use SMPP on the SMS API.
  '1090':
    description: >-
      Message too long  -  The length of `udh` and `body` was greater than 140
      octets for a binary type SMS request.
  '1100':
    description: >-
      Communication Failed  -  Message was not submitted because there was a
      communication failure.
  '1120':
    description: >-
      Illegal Sender Address - rejected  -  Due to local regulations, the
      `SenderID` you set in from in the request was not accepted. Please check
      the Global messaging section.
  '1130':
    description: Invalid TTL  -  The value of `ttl` in your request was invalid.
  '1140':
    description: >-
      Facility not allowed  -  Your request makes use of a facility that is not
      enabled on your account.
  '1150':
    description: >-
      Invalid Message class  -  The value of `message-`class in your request was
      out of range. See https://en.wikipedia.org/wiki/Data_Coding_Scheme.
  '1160':
    description: >-
      Non White-listed Destination  -  The phone number you set in to is not in
      your pre-approved destination list. To send messages to this phone number,
      add it using Dashboard.
  '1170':
    description: >-
      Invalid or Missing Msisdn Param  -  The phone number you supplied in the
      to parameter of your request was either missing or invalid.
  '1180':
    description: >-
      Absent Subscriber Temporary  -  This message was not delivered because to
      was temporarily unavailable. For example, the handset used for to was out
      of coverage or switched off. This is a temporary failure, retry later for
      a positive result.
  '1190':
    description: >-
      Absent Subscriber Permanent  -  `to` is no longer active, You should
      remove this phone number from your database.
  '1200':
    description: >-
      Portability Error  -  There is an issue after the user has changed carrier
      for to. If the user wants to receive messages from you, they need to
      contact their carrier directly.
  '1210':
    description: >-
      Anti-Spam Rejection  -  Carriers often apply restrictions that block
      messages following different criteria. For example on SenderID or message
      content.
  '1220':
    description: >-
      Handset Busy  -  The handset associated with to was not available when
      this message was sent. If status is rejected, this is a temporary failure;
      retry later for a positive result. If status is submitted, this message
      has is in the retry scheme and will be resent until it expires in 24-48
      hours.
  '1230':
    description: >-
      Network Error  -  A network failure while sending your message. This is a
      temporary failure, retry later for a positive result.
  '1240':
    description: >-
      Illegal Number  -  You tried to send a message to a blacklisted phone
      number. That is, the user has already sent a STOP opt-out message and no
      longer wishes to receive messages from you.
  '1241':
    description: Too many send requests  -  Too many send requests to phone numbers.
  '1250':
    description: >-
      Unroutable  -  The chosen route to send your message is not available.
      This is because the phone number is either currently on an unsupported
      network or on a pre-paid or reseller account that could not receive a
      message sent by from. To resolve this issue either email us at
      support@nexmo.com or create a helpdesk ticket at https://help.nexmo.com.
  '1260':
    description: >-
      Destination unreachable  -  The message could not be delivered to the
      phone number. If using Viber Service Messages your account might not be
      enabled for this country.
  '1270':
    description: >-
      Subscriber Age Restriction  -  The carrier blocked this message because
      the content is not suitable for to based on age restrictions.
  '1280':
    description: >-
      Number Blocked by Carrier  -  The carrier blocked this message. This could
      be due to several reasons. For example, to's plan does not include SMS or
      the account is suspended.
  '1290':
    description: >-
      Pre-Paid - Insufficient funds  -  to’s pre-paid account does not have
      enough credit to receive the message.
  '1300':
    description: >-
      Not part of the provider network  -  The number or ID is not a user in the
      provider network.
  '1310':
    description: Not suitable device  -  The user's device can't receive the message.
  '1320':
    description: Message already sent  -  The message was already sent.
  '1330':
    description: >-
      Unknown  -  An unknown error was received from the carrier who tried to
      send this this message. Depending on the carrier, that to is unknown. When
      you see this error, and status is rejected, always check if to in your
      request was valid.
  '1331':
    description: >-
      Provider error  -  The provider is not responding or unable to process the
      request. Please try sending your message in a few minutes time.
  '1340':
    description: >-
      Outside of the allowed window  -  This message is sent outside of allowed
      response window.
  '1350':
    description: >-
      Phone matching fee not paid  -  Requires phone matching access fee to be
      paid by the Facebook Page.
  '1360':
    description: >-
      TTL was activated  -  TTL was activated, no callbacks and no charge will
      be issued.
  '1370':
    description: >-
      Expired access Token - Please reauthenticate your Facebook Page with
      Vonage.
  '1380':
    description: >-
      Invalid resource - Please check that the URL your provided to your
      resource is accessible and valid.
  '1381':
    description: Resource size is too large - Please try sending a smaller media file.
  '1382':
    description: >-
      Resource type is invalid - Please check that the file you are trying to
      send is valid.
  '1400':
    description: >-
      Unsupported channel - The channel specified in the request is not
      supported.
  '1410':
    description: >-
      Invalid channel parameters -  The value of one or more parameters is
      invalid.
  '1420':
    description: Invalid sender -  The `from` parameter is invalid for the given channel.
  '1430':
    description: Invalid recipient -  The `to` parameter is invalid for the given channel.
  '1440':
    description: >-
      Invalid message type - The message type specified in the request is not
      supported for the given channel.
  '1450':
    description: >-
      Invalid client reference -  The client reference can be a string of up to
      40 characters.
x-webhooks:
  inbound-message:
    '{$request.body#/callback}':
      post:
        description: An inbound message from a customer to you.
        operationId: inbound-message
        requestBody:
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/definitions/inboundMessageSMS'
                  - oneOf:
                      - allOf:
                          - $ref: '#/definitions/inboundMessageMMS'
                          - $ref: '#/definitions/Image'
                      - allOf:
                          - $ref: '#/definitions/inboundMessageMMS'
                          - $ref: '#/definitions/vCard'
                      - allOf:
                          - $ref: '#/definitions/inboundMessageMMS'
                          - $ref: '#/definitions/Audio'
                          - properties:
                              audio:
                                properties:
                                  url:
                                    description: >-
                                      Publicly accessible URL of the audio
                                      attachment.
                                    maxLength: 2000
                                    minLength: 10
                                    type: string
                                required:
                                  - url
                      - allOf:
                          - $ref: '#/definitions/inboundMessageMMS'
                          - $ref: '#/definitions/Video'
                          - properties:
                              video:
                                properties:
                                  url:
                                    description: >-
                                      Publicly accessible URL of the video
                                      attachment.
                                    type: string
                                required:
                                  - url
                    title: MMS
                    x-tab-id: MMS
                  - oneOf:
                      - allOf:
                          - $ref: '#/definitions/inboundWhatsAppMessageCommon'
                          - $ref: '#/definitions/Text'
                      - allOf:
                          - $ref: '#/definitions/inboundWhatsAppMessageCommon'
                          - $ref: '#/definitions/Image'
                      - allOf:
                          - $ref: '#/definitions/inboundWhatsAppMessageCommon'
                          - $ref: '#/definitions/Video'
                      - allOf:
                          - $ref: '#/definitions/inboundWhatsAppMessageCommon'
                          - $ref: '#/definitions/File'
                      - allOf:
                          - $ref: '#/definitions/inboundWhatsAppMessageCommon'
                          - $ref: '#/definitions/Audio'
                          - properties:
                              audio:
                                properties:
                                  url:
                                    maxLength: 2000
                                    minLength: 10
                                required:
                                  - url
                      - allOf:
                          - $ref: '#/definitions/inboundWhatsAppMessageCommon'
                          - $ref: '#/definitions/Reply'
                      - allOf:
                          - $ref: '#/definitions/inboundWhatsAppMessageCommon'
                          - $ref: '#/definitions/Unsupported'
                    title: WhatsApp
                    x-tab-id: WhatsApp
                  - oneOf:
                      - allOf:
                          - $ref: '#/definitions/InboundMessengerMessageCommon'
                          - $ref: '#/definitions/Text'
                      - allOf:
                          - $ref: '#/definitions/InboundMessengerMessageCommon'
                          - $ref: '#/definitions/Image'
                      - allOf:
                          - $ref: '#/definitions/InboundMessengerMessageCommon'
                          - $ref: '#/definitions/Video'
                      - allOf:
                          - $ref: '#/definitions/InboundMessengerMessageCommon'
                          - $ref: '#/definitions/File'
                      - allOf:
                          - $ref: '#/definitions/InboundMessengerMessageCommon'
                          - $ref: '#/definitions/Audio'
                          - properties:
                              audio:
                                properties:
                                  url:
                                    maxLength: 2000
                                    minLength: 10
                                required:
                                  - url
                      - allOf:
                          - $ref: '#/definitions/InboundMessengerMessageCommon'
                          - $ref: '#/definitions/Unsupported'
                    title: Messenger
                    x-tab-id: Messenger
                  - oneOf:
                      - allOf:
                          - $ref: '#/definitions/InboundViberMessageCommon'
                          - $ref: '#/definitions/Text'
                      - allOf:
                          - $ref: '#/definitions/InboundViberMessageCommon'
                          - $ref: '#/definitions/Image'
                    title: Viber
                    x-tab-id: Viber
          required: true
        responses:
          '200':
            description: Your server returns this code if it accepts the callback.
        summary: Inbound Message
        x-example-path: /webhooks/inbound-message

